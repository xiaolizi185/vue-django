webpackJsonp([0],{"cM7/":function(t,e){},lO7g:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"home",data:function(){return{input:"",bookList:[],editParams:"",dialogFormVisible:!1,form:{name:""}}},mounted:function(){this.showBooks()},methods:{addBook:function(){var t=this;""!==this.input&&null!==this.input?this.$http.get("http://127.0.0.1:8000/api/add_book?book_name="+this.input).then(function(e){var o=JSON.parse(e.bodyText);0===o.error_num?(t.showBooks(),t.$message.success("新增书籍成功。")):(t.$message.error("新增书籍失败，请重试"),console.log(o.msg))}):this.$message.error("请输入书籍名称。")},showBooks:function(){var t=this;this.$http.get("http://127.0.0.1:8000/api/show_books").then(function(e){var o=JSON.parse(e.bodyText);console.log(o),0===o.error_num?t.bookList=o.list:(t.$message.error("查询书籍失败"),console.log(o.msg))})},edit:function(t){this.dialogFormVisible=!0,this.form.name="",this.editParams=t},confirm:function(){var t=this;this.$http.get("http://127.0.0.1:8000/api/update_book?book_name="+this.form.name+"&book_id="+this.editParams.pk+"&add_time=2020-08-20T11:54:44.544Z").then(function(e){var o=JSON.parse(e.bodyText);0===o.error_num?(t.showBooks(),t.$message.success("修改成功。"),t.dialogFormVisible=!1):(t.$message.error("修改书籍失败，请重试"),console.log(o.msg),t.dialogFormVisible=!1)})},deletebook:function(t){var e=this;this.$http.get("http://127.0.0.1:8000/api/delete_book?book_id="+t.pk).then(function(t){var o=JSON.parse(t.bodyText);0===o.error_num?(e.showBooks(),e.$message.success("删除成功。")):(e.$message.error("删除书籍失败，请重试"),console.log(o.msg))})}}},s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[o("router-link",{attrs:{to:"/login"}},[t._v("登录")]),t._v(" "),o("router-link",{attrs:{to:"/HelloWorld"}},[t._v("HelloWorld")]),t._v(" "),o("el-row",{attrs:{display:"margin-top:10px"}},[o("el-input",{staticStyle:{display:"inline-table",width:"30%",float:"left"},attrs:{placeholder:"请输入书名"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),o("el-button",{staticStyle:{float:"left",margin:"2px"},attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.addBook()}}},[t._v("新增")])],1),t._v(" "),o("el-row",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.bookList,border:""}},[o("el-table-column",{attrs:{prop:"id",label:"编号","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.pk)+" ")]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"book_name",label:"书名","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.fields.book_name)+" ")]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"add_time",label:"添加时间","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.fields.add_time)+" ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){return t.edit(e.row)}}},[t._v("修改")]),t._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(o){return t.deletebook(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"修改书籍",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"书籍名称","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirm()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=o("VU/8")(i,s,!1,function(t){o("cM7/")},"data-v-05338da8",null);e.default=r.exports}});
//# sourceMappingURL=0.1554baab52febeb0fff9.js.map